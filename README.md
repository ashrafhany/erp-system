# 🏢 نظام ERP المصغّر - Mini ERP System

نظام إدارة موارد المؤسسة (ERP) مصغّر ومتكامل مبني باستخدام Laravel 11، يوفر إدارة شاملة للموظفين والرواتب والحضور والعملاء والفواتير.

<div dir="rtl">

## 📋 المحتويات

- [المميزات](#-المميزات)
- [متطلبات النظام](#-متطلبات-النظام)
- [التثبيت](#-التثبيت)
- [الاستخدام](#-الاستخدام)
- [واجهات النظام](#-واجهات-النظام)
- [قاعدة البيانات](#-قاعدة-البيانات)
- [الأمان](#-الأمان)
- [المساهمة](#-المساهمة)
- [الدعم الفني](#-الدعم-الفني)

## ✨ المميزات

### 👥 إدارة الموظفين
- ✅ إضافة وتعديل وحذف الموظفين
- ✅ تتبع البيانات الشخصية والوظيفية
- ✅ إدارة الأقسام والمناصب
- ✅ تتبع حالة الموظف (نشط/غير نشط/منتهي الخدمة)
- ✅ عرض تفاصيل شاملة لكل موظف

### ⏰ إدارة الحضور والانصراف
- ✅ تسجيل دخول وخروج الموظفين
- ✅ حساب ساعات العمل تلقائياً
- ✅ تتبع حالات الحضور (حاضر/غائب/متأخر/نصف يوم)
- ✅ تقارير الحضور اليومية والشهرية
- ✅ فلاتر بحث متقدمة

### 💰 إدارة الرواتب
- ✅ حساب الرواتب الشهرية
- ✅ إدارة الساعات الإضافية والبدلات
- ✅ حساب الخصومات والضرائب
- ✅ اعتماد ودفع الرواتب
- ✅ تقارير الرواتب التفصيلية

### 🤝 إدارة العملاء
- ✅ قاعدة بيانات شاملة للعملاء
- ✅ تتبع بيانات التواصل والشركات
- ✅ إدارة حدود الائتمان
- ✅ تتبع حالة العميل وملاحظاته

### 🧾 إدارة الفواتير
- ✅ إنشاء وإدارة الفواتير
- ✅ إضافة عناصر متعددة للفاتورة
- ✅ حساب الضرائب والخصومات تلقائياً
- ✅ تتبع حالات الدفع
- ✅ تسجيل المدفوعات الجزئية والكاملة

### 📊 لوحة المراقبة
- ✅ إحصائيات شاملة للنظام
- ✅ مؤشرات الأداء الرئيسية
- ✅ تتبع الحضور اليومي
- ✅ مراقبة الفواتير المعلقة والمتأخرة

## 🔧 متطلبات النظام

- **PHP** >= 8.2
- **Composer** >= 2.0
- **Laravel** 11.x
- **قاعدة بيانات**: SQLite (افتراضي) أو MySQL أو PostgreSQL
- **خادم ويب**: Apache أو Nginx أو Laravel's built-in server

### المتطلبات الإضافية
- **Node.js** >= 16.0 (للواجهة الأمامية)
- **npm** أو **yarn** (لإدارة الحزم)

## 🚀 التثبيت

### 1. استنساخ المشروع
```bash
git clone https://github.com/your-username/mini-erp-system.git
cd mini-erp-system
```

### 2. تثبيت التبعيات
```bash
# تثبيت تبعيات PHP
composer install

# تثبيت تبعيات JavaScript
npm install
```

### 3. إعداد البيئة
```bash
# نسخ ملف البيئة
cp .env.example .env

# إنشاء مفتاح التطبيق
php artisan key:generate
```

### 4. إعداد قاعدة البيانات
```bash
# إنشاء ملف قاعدة البيانات SQLite
touch database/database.sqlite

# تشغيل الهجرات
php artisan migrate

# إضافة البيانات التجريبية
php artisan db:seed
```

### 5. تشغيل النظام
```bash
# تشغيل خادم Laravel
php artisan serve

# تشغيل Vite للواجهة الأمامية (في terminal منفصل)
npm run dev
```

النظام سيكون متاحاً على: `http://localhost:8000`

## 📱 الاستخدام

### الوصول للنظام
1. افتح المتصفح وتوجه إلى `http://localhost:8000`
2. ستظهر لك لوحة المراقبة الرئيسية
3. استخدم القائمة الجانبية للتنقل بين الأقسام

### البيانات التجريبية
النظام يأتي مع بيانات تجريبية شاملة:
- **5 موظفين** في أقسام مختلفة
- **4 عملاء** مع بيانات كاملة
- بيانات حضور وراتب نموذجية

## 🖥️ واجهات النظام

### لوحة المراقبة (`/`)
- عرض الإحصائيات العامة
- مؤشرات الأداء الرئيسية
- آخر الفواتير والأنشطة

### إدارة الموظفين (`/employees`)
- **عرض الموظفين**: `/employees`
- **إضافة موظف**: `/employees/create`
- **تفاصيل الموظف**: `/employees/{id}`
- **تعديل الموظف**: `/employees/{id}/edit`

### إدارة الحضور (`/attendance`)
- **سجلات الحضور**: `/attendance`
- **تسجيل حضور جديد**: `/attendance/create`
- **تسجيل دخول سريع**: `/attendance/checkin/{employee}`
- **تسجيل خروج سريع**: `/attendance/checkout/{employee}`

### إدارة الرواتب (`/payroll`)
- **سجلات الرواتب**: `/payroll`
- **إنشاء راتب جديد**: `/payroll/create`
- **إنشاء راتب تلقائي**: `/payroll/generate/{employee}`
- **اعتماد الراتب**: `/payroll/approve/{payroll}`

### إدارة العملاء (`/customers`)
- **عرض العملاء**: `/customers`
- **إضافة عميل**: `/customers/create`
- **تفاصيل العميل**: `/customers/{id}`

### إدارة الفواتير (`/invoices`)
- **عرض الفواتير**: `/invoices`
- **إنشاء فاتورة**: `/invoices/create`
- **تفاصيل الفاتورة**: `/invoices/{id}`
- **إضافة عناصر**: `/invoices/{id}/items`

## 🗄️ قاعدة البيانات

### الجداول الرئيسية

#### `employees` - الموظفين
```sql
- id (المعرف الفريد)
- employee_id (رقم الموظف)
- first_name, last_name (الاسم)
- email (البريد الإلكتروني)
- department, position (القسم والمنصب)
- basic_salary (الراتب الأساسي)
- hire_date (تاريخ التوظيف)
- status (الحالة)
```

#### `attendances` - الحضور
```sql
- id (المعرف الفريد)
- employee_id (معرف الموظف)
- date (التاريخ)
- check_in, check_out (وقت الدخول والخروج)
- total_hours (إجمالي الساعات)
- status (حالة الحضور)
```

#### `payroll_records` - سجلات الرواتب
```sql
- id (المعرف الفريد)
- employee_id (معرف الموظف)
- payroll_month (شهر الراتب)
- basic_salary (الراتب الأساسي)
- overtime_amount (مبلغ الساعات الإضافية)
- allowances (البدلات)
- deductions (الخصومات)
- net_salary (الراتب الصافي)
```

#### `customers` - العملاء
```sql
- id (المعرف الفريد)
- customer_code (رمز العميل)
- name (اسم العميل)
- company_name (اسم الشركة)
- email, phone (بيانات التواصل)
- credit_limit (حد الائتمان)
```

#### `invoices` - الفواتير
```sql
- id (المعرف الفريد)
- invoice_number (رقم الفاتورة)
- customer_id (معرف العميل)
- invoice_date, due_date (تواريخ الفاتورة)
- total_amount (المبلغ الإجمالي)
- paid_amount (المبلغ المدفوع)
- status (حالة الفاتورة)
```

## 🔒 الأمان

### الحماية المطبقة
- **CSRF Protection** - حماية من هجمات CSRF
- **SQL Injection Prevention** - منع حقن SQL
- **XSS Protection** - حماية من XSS
- **Input Validation** - التحقق من صحة المدخلات
- **Secure Headers** - رؤوس الأمان

## 🛠️ التخصيص والتطوير

### إضافة ميزات جديدة
```bash
# إنشاء Migration جديد
php artisan make:migration create_new_table

# إنشاء Model
php artisan make:model ModelName -m

# إنشاء Controller
php artisan make:controller ControllerName --resource
```

### تخصيص التصميم
- الملفات في `resources/views/`
- استخدام Bootstrap 5 و Font Awesome
- دعم كامل للغة العربية (RTL)

## 📊 التقارير المتاحة

### تقارير الحضور
- تقرير الحضور اليومي
- تقرير الحضور الشهري
- تقرير ساعات العمل الإضافية

### تقارير الرواتب
- كشف رواتب شهري
- تقرير البدلات والخصومات
- تقرير الضرائب

### تقارير المالية
- تقرير الفواتير
- تقرير المدفوعات
- تقرير المبالغ المعلقة

## 🔄 النسخ الاحتياطي

### إنشاء نسخة احتياطية
```bash
# نسخ احتياطية لقاعدة البيانات
cp database/database.sqlite backup/database_$(date +%Y%m%d).sqlite

# نسخ احتياطية للملفات المرفوعة
tar -czf backup/storage_$(date +%Y%m%d).tar.gz storage/
```

## 🐛 استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### خطأ في قاعدة البيانات
```bash
# إعادة تشغيل الهجرات
php artisan migrate:fresh --seed
```

#### خطأ في التخزين المؤقت
```bash
# مسح التخزين المؤقت
php artisan cache:clear
php artisan config:clear
php artisan view:clear
```

## 🔮 الخطط المستقبلية

### الميزات القادمة
- [ ] نظام إدارة المخزون
- [ ] تقارير متقدمة مع الرسوم البيانية
- [ ] API للتطبيقات الخارجية
- [ ] نظام الإشعارات
- [ ] نظام النسخ الاحتياطي التلقائي
- [ ] دعم عدة لغات
- [ ] تطبيق موبايل

## 🤝 المساهمة

نرحب بمساهماتكم في تطوير النظام!

### كيفية المساهمة
1. Fork المشروع
2. إنشاء branch جديد (`git checkout -b feature/AmazingFeature`)
3. Commit التغييرات (`git commit -m 'Add some AmazingFeature'`)
4. Push إلى البranch (`git push origin feature/AmazingFeature`)
5. إنشاء Pull Request

### معايير المساهمة
- اتباع PSR-12 coding standards
- كتابة اختبارات للميزات الجديدة
- توثيق التغييرات في README
- استخدام التعليقات باللغة العربية

## 📝 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 الدعم الفني

### الأسئلة الشائعة

**س: كيف يمكنني إضافة موظف جديد؟**
ج: اذهب إلى قسم "إدارة الموظفين" واضغط على "إضافة موظف جديد"

**س: كيف يمكنني تسجيل حضور الموظفين؟**
ج: يمكنك استخدام الأزرار السريعة في صفحة تفاصيل الموظف أو إنشاء سجل حضور جديد

**س: كيف يمكنني إنشاء فاتورة؟**
ج: اذهب إلى قسم "إدارة الفواتير" واضغط على "إنشاء فاتورة جديدة"

---

## 🎯 ملخص المشروع

نظام ERP المصغّر هو حل متكامل ومبسط لإدارة الموارد في الشركات الصغيرة والمتوسطة. يوفر النظام جميع الأدوات الأساسية اللازمة لإدارة الموظفين والحضور والرواتب والعملاء والفواتير في واجهة واحدة سهلة الاستخدام.

**تم تطوير النظام باستخدام أحدث التقنيات ووفقاً لأفضل الممارسات في البرمجة، مع دعم كامل للغة العربية وتصميم متجاوب يعمل على جميع الأجهزة.**

</div>

---

*آخر تحديث: يوليو 2025*
